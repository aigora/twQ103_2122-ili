/Amnesia hecho por: Laura Navarro Briz, Itziar Saldaña Gonzalez y Pablo Sanchez Oliveros
#include <stdio.h>
#include <string.h>
#define TAM 100
struct Cumpleanos1
{
    int dia;
    int mes;
    int agno;
};
struct Cumpleanos2
{
    int dia1;
    int mes1;
    int agno1;
};
//FunciÛn del Acertijo 1:
int Pregunta1 (int respuesta1) {

	while (respuesta1 != 11) {
		printf ("\nVaya te has confundido! vuelve a intentarlo, introduce tu nueva respuesta:");
		scanf ("%d", &respuesta1);
	}
	if (respuesta1 == 11) {
		printf ("\nEnhorabuena! Has pasado el primer acertijo con Èxito, has logrado comprar el billete y coger el metro.\n");
	}
	return respuesta1;
}

//FunciÛn del Acertijo 2:
int Pregunta2 (int respuesta2) {

	while (respuesta2 != 8) {
		printf ("\nRespuesta incorrecta, prueba otra vez!, introduce denuevo tu respuesta:  ");
		scanf ("%d", &respuesta2);
		printf ("\n");
	}
	if (respuesta2 == 8) {
		printf ("Estas en racha! De lado, el n˙mero 8 parece un infinito. Cortado por la mitad, se convierte en dos ceros. Por lo que te bajas en callao.\n");
	}
	return respuesta2;
}

//FunciÛn del acertijo 3A:
int Pregunta3A (int respuesta3A) {

	while (respuesta3A != 7) {
		printf ("\nMal! Sigue intentandolo, vuelve a probar con ese numerito ;):  ");
		scanf ("%d", &respuesta3A);
	}
	if (respuesta3A == 7) {
		printf ("\nEnhorabuena! Acabas de encontrar el numero de la calle correcta.\n");
	}
	return respuesta3A;
}

//FunciÛn del acertijo 4:
int Pregunta4 (char respuesta4) {

	while (respuesta4 != 'A') {
		printf ("\nMal! Sigue intentandolo:  ");
		scanf ("%c", &respuesta4);
	}
	if (respuesta4 == 'A') {
		printf ("\nEnhorabuena! Acabas de encontrar el lugar a donde tienes que entrar.");
	}
	return respuesta4;
}

//Estructura para el acertijo 3B:
struct TAnimal {
	char animal[TAM];
};

//Estructura para el acertijo 5:
struct TVector{
	char mes[TAM];
	int dia;

};

int main (){
    printf("Bienvenido al juego AMNESIA\n");
    printf("pulse cualquier tecla para abrir la pantalla de inicio\n");
    scanf("\n");
    printf("Te levantas, has perdido la memoria lo unico que sabes es que tienes una carta en el bolsillo y decides abrirla, te dice que tienes que elegir una ruta para averiguar toda la verdad...\n");
    char opcionn;
    char opcion11;
    int nickname;
    printf("Pulse 1 si quieres jugar, pulse 2 si decides lo contrario\n");
    fflush(stdin);
    scanf("%c", &opcionn);
    switch (opcionn) {
    case '1':
                       printf("                                    ##     ##   ##  ##   ##  #######   #####    ####      ##   \n");
                       printf("                                   ####    ### ###  ###  ##   ##   #  ##   ##    ##      ####  \n");
                       printf("                                  ##  ##   #######  #### ##   ## #    #          ##     ##  ## \n");
                       printf("                                  ##  ##   #######  ## ####   ####     #####     ##     ##  ## \n");
                       printf("                                  ######   ## # ##  ##  ###   ## #         ##    ##     ###### \n");
                       printf("                                  ##  ##   ##   ##  ##   ##   ##   #  ##   ##    ##     ##  ## \n");
                       printf("                                  ##  ##   ##   ##  ##   ##  #######   #####    ####    ##  ##  \n");

                        printf("=====================================+@@@@==#%%%%*======================================================================================================\n");
                        printf("=====================================+@@@*==*@@@@#======================================================================================================\n");
                        printf("================================+*+==#@@@%**%#*%@+======================================================================================================\n");
                        printf("================================@@@%%@@@@@@@%===========================================================================================================\n");
                        printf("================================*#*=+%@@@%**@##%@=======================================================================================================\n");
                        printf("=====================================#@@@*==%@@@%=================================+**##%%@@@@@@@@@%%%##*+===============================================\n");
                        printf("=====================================*@@@%=+@@@%%===========================+*#%@@@@@@@@@@@@@@@@@@@@@@@@@@@%#+==========================================\n");
                        printf("========================================================================+*%@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@%*+======================================\n");
                        printf("=====================================================================+*%@@@@@@@@@@@@*####@:*####%@@@@@@@@@@@@@@@@@@%*===================================\n");
                        printf("===================================================================+%@@@@@@@@@@@@@@@%   .%@+   @@@@@@@@@@@@@@@@@@@@@@#==================================\n");
                        printf("=================================================================*%@@@@@@@@@@@@@%+*@%   .%@*   #%++@@@@@@@@@@@@@@@@@@@@*================================\n");
                        printf("==================#%+==========================================+%%#%@@@@@@@@@@@@-               :  #@@@@@@@@@@@@@@@@@@@@%+==============================\n");
                        printf("=================+@%+=========================================#@%###.@@@@@@@@@@@@#=+#:    ==    %@##@@@@@@@@@@@@@@@@@@@@@@@#============================\n");
                        printf("==============+===%%+=++*+==================================+%@@%: -@@@@@@@@@@@@@@@@-   *@@+   %@@@@@@@@@@@@@@@@@@@@@@@@@@@%============================\n");
                        printf("=============+@@@@@@@@@@@%=================================+@@@@@= #@@@@@@@@@@@@@@@@-   :%#.   *@@@@@@@@@@@@@@@@@@@@@@@@@@@@%===========================\n");
                        printf("=============*@@%%@@@@@@@%================================*@@-::.   -===%@@@@@@@@@@@#++**@%=--=%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%==========================\n");
                        printf("==============++==#@@+=+#+===============================+@@%           +@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#=========================\n");
                        printf("==============##++%@@+==*+===============================@@@%  -.   .:. =@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*========================\n");
                        printf("=============+@@@@@@@@@@@*==============================#@@@@@@@@.  %@%#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%========================\n");
                        printf("=============+@@@@@@@@@@@#=============================+@@@@@:.=- . +#+*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*=======================\n");
                        printf("=============*+==#@%**#*+=============================%@@@@@@     #@   .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=======================\n");
                        printf("==================%@#=================================+@@@@@@:   +@#   .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=======================\n");
                        printf("==================%@%=================================*@@@@@@+++=+@*:..-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=======================\n");
                        printf("======================================================#@@@@@@@@@@@@@@@@+@@@@@@@@@@@@+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%======================\n");
                        printf("=====================================================%@@@@@@@@@@@@@@@@@@@*          =@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*=====================\n");
                        printf("======================================================@@@@@@@@@@@@@@@@@@@*          =@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*====================\n");
                        printf("======================================================@@@@@@@@@@@@@%@@.                 -%++%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@====================\n");
                        printf("======================================================%@@@@@@@@@@%#@@@        +@%-      =@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#===================\n");
                        printf("======================================================%@@@@@@@@@*  =@@@@@     +@@-   +@#*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+=================\n");
                        printf("======================================================#@@@@@@@@@#. *@@@@@#    .@*    *@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*================\n");
                        printf("============+**+==++++++==============================*@@@@@%***+..#%%#*++*%@@*===#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#================\n");
                        printf("============%@@%++@@@@@*===============================@@@@@+          +@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%===============\n");
                        printf("============%@@*==#@@@@#===============================#@@@@+          =@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+=============\n");
                        printf("========**++@@@@%%@@@@@%+#%#===========================+@@@@+  .   .++:+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+============\n");
                        printf("=======*@@@%@@@@@@@@@@@%#%@%============================%@@@%*%@+  :@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%============\n");
                        printf("========++==#@@@#++%@@@+==+=============================+@@@*:+#-   .. +@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+===========\n");
                        printf("============%@@@#=+@@@@+=================================#@@=          -@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#============\n");
                        printf("============*###+=+##**+==================================%@=.::.  :-::+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%#*==============\n");
                        printf("==========================================================+@@@@@@+ *@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+==================\n");
                        printf("===========================================================+@@@@@. .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*==================\n");
                        printf("============================================================+%@@@=:=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%==================\n");
                        printf("==============================================================%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#=================\n");
                        printf("===============================================================%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+================\n");
                        printf("================================================================%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+=================\n");
                        printf("=================================================================%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*==================\n");
                        printf("=================================================================+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#=================\n");
                        printf("==================================================================#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+=================\n");
                        printf("===============================%%%#+=+###*========================+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%===================\n");
                        printf("===============================@@@@*=#@@@*========================+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+===================\n");
                        printf("===========================#*=+@@@%===@@@*========================+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*===================\n");
                        printf("==========================+@@%%@@@@*+*@@@@#%%+====================+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@===================\n");
                        printf("============================+=+@@@@@@@@@@#+##=====================*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#==================\n");
                        printf("==============================+@@@@@@@@@@*========================#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%==================\n");
                        printf("===============================+++*%@##%#*========================@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+==================\n");
                        printf("===================================%@+============================@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+===================\n");
                        printf("==================================+@@#===========================*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%*+=====================\n");
                        printf("====================================+============================#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=======================================\n");
                        printf("=================================================================%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%========================================\n");
        printf("Comienza el juego\n");
        printf("Introduce un nickname\n",nickname);
        scanf("%d", &nickname);
        printf("øque ruta eliges, la linea 5 o la 3?\n");
        opcion11=getch();
        switch (opcion11) {
        case '5':
            printf("te ha tocado la ruta corta \n");
            char aux1;
            fflush(stdin);
            printf(" por cada acertijo resuelto recibiras la recompensa de una pista que deberas de guardar para solucionar el enigma final, pulse cualquier tecla para comezar con el primer acertijo\n");
            scanf("\n");
            printf("Adelante!\n Llegas al metro,  pero ha surgido una averia en la pantalla que indica las direcciones de la linea 5, tendras que resolver un acertijo para averiguar el sentido al que debes dirigirte");
            printf("\nPulsa  cualquier tecla para comenzar con el primero Acertijo\n");
            scanf("\n");
            // ACERTIJO 1
            printf("\n Esta parada es conocida como el pulmon verde de la Comunidad, en ella se encuentra un parque muy conocido de atracciones. De que parada crees que se trata?\n");
            FILE*pfichero;
            pfichero=fopen("acertijo1.txt","r");
            if(pfichero==NULL){
                printf("Error en la apertura del fichero\n");
                return 0;}
            while (aux1 != EOF) {
            aux1= fgetc(pfichero);
            printf("%c", aux1);}
            fclose(pfichero);
            char opcion1;
            fflush(stdin);
            scanf("%c", &opcion1);
            if(opcion1 == 'a' ){
                printf("Enhorabuena, has acertado el primer acertijo, puedes subirte al tren direccion Casa de campo, pulsa cualquier tecla para continuar con la aventura\n");
                scanf("\n");}
            else if (opcion1=='b'||'c'||'d'||'B'||'C'||'D') {
                do{
                    printf("vaya! has fallado, vuelve a introducir una opcion: ");
                    scanf("\n %c", &opcion1);  }
                while(opcion1!='a');
                printf("Enhorabuena, has acertado el primer acertijo, puedes subirte al tren direccion Casa de campo, pulsa cualquier tecla para continuar con la aventura\n");
                scanf("\n");}
                int opcion, decision;
                char respuesta;
                //BONUS
                printf("\n BONUS!!! Acabas de coger el metro, pero hay una seÒora que te esta pidiendo ayuda con un carrito de bebe para entrar al vagon. Si decides ayudarla tendras que responder a otra pregunta, que mas adelante te dara una ayuda. OJO! solo tendras una oportunidad, si no la consigues resolver no obtendras el bonus.Que haces?\n");
                printf("Pulsa 1 para ayudarla\n");
                printf("Pulsa 2 para no ayudarla\n");
                fflush(stdin);
                char aux6;
                scanf("%d", &opcion);
                if(opcion == 1){
                    printf("\n Para ayudarla resuelve: cuando has salido de casa , que es lo unico que recuerdas haber cogido?\n");
                    FILE*pficherobonus;
                    pficherobonus=fopen("bonus.txt","r");
                    if(pficherobonus==NULL){
                        printf("Error en la apertura del fichero\n");
                        return 0;}
                    while (aux6 != EOF) {
                        aux6= fgetc(pficherobonus);
                        printf("%c", aux6);}
                    fclose(pficherobonus);
                    fflush(stdin);
                    scanf("%c", &respuesta);
                    if(respuesta == 'd'){
                        printf("lo has conseguido! \n");
                        printf("Tu ayuda:en el enigma final deberas de dar una fecha, en alguno de los acertijos conseguiras un numero, estate atento/a, pulse cualquier tecla para continuar \n");
                        scanf("\n");}
                    else if (respuesta=='b'||'c'|| 'a'){
                        printf("Fallaste! La opcion correcta era el papel, no obtienes la ayuda, pulsa cualquier tecla para seguir jugando\n");
                        scanf("\n");}}
                else if(opcion==2){
                    printf("Estas seguro/a de tu decision? A la senyora se le ve muy cansada \n");
                    printf("Pulse 3 si has cambiado de opinion\n");
                    printf("Pulse 4 si estas seguro de tu decision\n");
                    fflush(stdin);
                    int decision;
                    scanf("%d", &decision);
            if(decision==3){
                printf("\veo que te lo has pensado mejor. Para ayudarla resuelve: cuando has salido de casa , que es lo unico que recuerdas haber cogido?\n");
                FILE*pficherobonus;
                pficherobonus=fopen("bonus.txt","r");
                if(pficherobonus==NULL){
                    printf("Error en la apertura del fichero\n");
                    return 0;}
                while (aux6 != EOF) {
                    aux6= fgetc(pficherobonus);
                    printf("%c", aux6);}
                fclose(pficherobonus);
                fflush(stdin);
                scanf("%c", &respuesta);
                if(respuesta == 'd'){
                    printf("lo has conseguido! \n");
                    fflush(stdin);
                    printf("Tu ayuda:en el enigma final deberas de dar una fecha, en alguno de los acertijos conseguiras un numero, estate atento/a, pulse cualquier tecla para continuar \n");
                    scanf("\n");}
                else if (respuesta=='b'||'c'|| 'a'){
                    printf("Fallaste! La opcion correcta era el papel, no obtienes la ayuda, pulsa cualquier tecla para seguir jugando");
                    scanf("\n");}}
            else if(decision==4){
                printf("Veo que aparte de la memoria tambien se te han olvidado los modales, No obtienes la ayuda , pulsa cualquier tecla para pasar al siguiente acertijo \n");
                scanf("\n");}}
            //ACERTIJO 2
            printf("Ahora deberas bajarte en la parada correcta, debes de saber que la parada tiene nombre de una ciudad de Portugal conocida por sus cuestas\n");
            char aux2;
            FILE*pfichero2;
            pfichero2=fopen("acertijo2.txt","r");
            if(pfichero2==NULL){
                printf("Error en la apertura del fichero\n");
                return 0;}
            while (aux2 != EOF) {
                aux2= fgetc(pfichero2);
                printf("%c", aux2);}
            fclose(pfichero2);
            char opcion2;
            fflush(stdin);
            scanf("%c", &opcion2);
            if(opcion2 == 'a' ){
                printf ("Muy bien, ahora deberas bajarte del metro, pulsa cualquier tecla para continuar\n");
                scanf("\n");}
            else if (opcion2=='b'||'c'||'d'||'B'||'C'||'D') {
                do{
                    printf("vaya! has fallado, vuelve a introducir una opcion: ");
                    scanf("\n %c", &opcion2);}
                while(opcion2!='a');
                printf("Muy bien, ahora deberas bajarte del metro, pulsa cualquier tecla para continuar\n");
                scanf("\n");}
                printf("Te acabas de bajar del metro, te ha entrado mucha hambre, lo unico que ves abierto es un Mcdonald's, te miras los bolsillos pero solo encuentras chatarrilla, tendras que coger un codigo de descuento(por ejemplo: D307).");
                printf("Te daremos una pista, es una letra y tres digitos , la letra es D y el ˙ltimo digito es 3, para saber los otros dos digitos deberas resolver las dos adivinanzas");
                printf("Para saber el primer digito responde a este acertijo  acertijo:\n");
            //ACERTIJO 3
            printf("Cual es el unico numero que no se puede vender?\n");
            FILE*pfichero3;
            char aux3;
            pfichero3=fopen("acertijo3.txt","r");
            if(pfichero3==NULL){
                printf("Error en la apertura del fichero\n");
                return 0;}
            while (aux3 != EOF) {
                aux3= fgetc(pfichero3);
                printf("%c", aux3);}
            fclose(pfichero3);
            char opcion3;
            fflush(stdin);
            scanf("%c", &opcion3);
            if(opcion3 == 'b' ){
                printf("La solucion es el primer digito del cupon de descuento , te faltara conocer el segundo: D0_ 3, pulsa cualquier tecla para averiguarlo\n");
                scanf("\n");}
            else if (opcion3=='a'||'c'||'d'||'A'||'C'||'D') {
                do{
                    printf("vaya! has fallado, vuelve a introducir una opcion: ");
                    scanf("\n %c", &opcion3);}
                while(opcion3!='b');
                printf("Muy bien, ahora deber·s bajarte del metro, pulsa cualquier tecla para continuar\n");
                scanf("\n");}
         //ACERTIJO 4
         fflush(stdin);
         printf("De muchos hijos que somos, el primero yo naci, pero soy el menor de todos ,Que numero soy?\n");
         int opcion4;
         scanf("%d", &opcion4);
         fflush(stdin);
         if(opcion4 == 1 ){
            printf("Bravo! El numero buscado era el 1. Ya tienes tu deseado cupon y puedes disfrutar de tu menu Mcpollo. Cada vez estas mas cerca de la final, no bajes el ritmo, pulsa cualquier tecla para continuar\n");
            scanf("\n"); ;}
         else {
            do{
                printf("vaya! has fallado, vuelve a introducir una opcion: ");
                scanf("\n %d", &opcion4);  }
            while(opcion4!=1);
            printf("Bravo! El numero buscado era el 1. Ya tienes tu deseado cupon y puedes disfrutar de tu menu Mcpollo. Cada vez estas mas cerca de la final, no bajes el ritmo, pulsa cualquier tecla para continuar\n");
            scanf("\n");}
            printf("Al salir del establecimiento debes llegar a  una calle para llegar a tu destino final.");
            //ACERTIJO 5
            printf("Por esta calle solia cruzar gente que vendia, en general, ricos anacardos.\n");
            printf("Que calle es?\n");
            char aux4;
            FILE*pfichero4;
            pfichero4=fopen("acertijo4.txt","r");
            if(pfichero4==NULL){
                printf("Error en la apertura del fichero\n");
                return 0;}
            while (aux4 != EOF) {
                aux4= fgetc(pfichero4);
                printf("%c", aux4);}
            fclose(pfichero4);
            char opcion5;
            fflush(stdin);
            scanf("%c", &opcion5);
            if(opcion5 == 'c' ){
                printf("Bravo, sigue por esa calle y encontraras el destino final, pulsa cualquier tecla para continuar\n");
                scanf("\n");}
            else if (opcion5=='a'||'b'||'d'||'A'||'B'||'D') {
                do{
                    printf("vaya! has fallado, vuelve a introducir una opcion: ");
                    scanf("\n %c", &opcion5);}
                while(opcion5!='c');
                printf("Bravo, sigue por esa calle y encontraras el destino final, pulsa cualquier tecla para continuar");
                scanf("\n");}
            struct Cumpleanos1 final={03,01,2001};
            int d, m, a;
            fflush(stdin);
            printf("Tu destino final es el Palacio Vistalegre, pero para entrar te piden la fecha de tu cumpleaÒos, que raro. Muy facil el ultimo acertijo no?, pues deberas recordar que has perdido la memoria y no te acuerdas,tendras que introducir la fecha en formato dd/mm/aaaa y recuerda que solo tienes UNA OPORTUNIDAD, si introduces mal la fecha has perdido\n");
            printf("\n Te daremos una pista, el numero de palabras que tenia la solucion del primer acertijo coincide con el dia en que naciste,el mes coincide con los numeros que has tenido que adivinar en el codigo de descuento, y el agno coindice con el el mismo en que se cayeron las Torres Gemelas. Cual es tu fecha de cumpleaÒos? \n");
            printf("\n Introduce el dia\n");
            scanf("%d",&d);
            printf("\n Introduce el numero del mes\n");
            scanf("%d",&m);
            printf("\n Introduce el agno\n");
            scanf("%d",&a);
            if(d==final.dia && m==final.mes && a==final.agno){
                printf("Bravo! Conseguiste pasar todos los acertijos, eres un autentico genio. Ahora sabras toda la verdad\n");
                printf("Resulta que Era una fiesta sorpresa, la fecha de cumpleagnos era hoy y tus amigos te habian preparado una sorpresa\n");
                printf("Si te has quedado con las ganas de jugar mas te animamos a probar nuestro modo dificil animo!\n");}
            else {printf("Que lastima!, has perdido, deberas empezar el juego otra vez\n");}}
                break;
        case '3':
            struct TAnimal animal[1] = {"asno"};
            struct TVector vector[1] = {"diciembre", 31};
	int respuesta1, acertijo1;
	char acertijo4, respuesta4;
	int respuesta2, acertijo2, respuesta3A, acertijo3A;
	int q = 0, r = 0, dia, opsion;
	char mes[TAM], animal0[TAM];
	fflush(stdin);
	printf ("Bienvenido, has elegido la ruta compleja, por cada acertijo resuelto recibiras la recompensa de una pista que deberas de guardar para solucionar el enigma final, pulsa cualquier tecla para continuar °Adelante!\n");
	scanf("\n");
	fflush(stdin);
	printf ("\nLlegas al metro, y ves un cartel, el tren direccion Villaverde Alto ha sufrido una averia, por lo que solo puedes dirigirte hacia el otro sentido, Moncloa. Para ello necesitas comprar un billete, pero tambien resolver un acertijo, pulsa cualquier tecla para continuar \n");
	scanf("\n");

	//Acertijo 1:
	printf ("\nACERTIJO 1: \nEl valor del billete sera la respuesta a la pregunta: Un hombre se levanta por la noche y descubre que no hay luz en su habitacion. Abre el cajon de los guantes, en el que hay diez guantes negros y diez azules. Cuantos debe coger para asegurarse de que obtiene un par del mismo color?\n");
	fflush(stdin);
    scanf ("%d", &acertijo1);
	if (acertijo1 != 11) {
		acertijo1 = Pregunta1(respuesta1);
	} else {
		printf ("\nEnhorabuena! Has pasado el primer acertijo con exito, has logrado comprar el billete y coger el metro, pulse cualquier tecla para continuar.");
		scanf("\n");
		fflush(stdin);
	}
	printf ("\nAhora deberas bajarte en la parada correcta, el resultado de la siguiente adivinanza te dira en cuantas paradas debes de bajarte.\n ");

	//Acertijo 2:
	printf ("\nACERTIJO 2: \nEl numero que deseas adivinar es todo si le pones de lado, sin embargo si le cortas por la mitad, no es nada. Que soy?: \n");
	printf("Introduza su respuesta: ");
	scanf ("%d", &acertijo2);
	if (acertijo2 != 8) {
		acertijo2 = Pregunta2(respuesta2);
	} else {
	    fflush(stdin);
		printf ("\nEstas en racha! De lado, el numero 8 parece un infinito. Cortado por la mitad, se convierte en dos ceros. Pulsa cualquier tecla para bajarte en callao\n");
		scanf("\n");
	}

	//Oopciones:
	printf ("\nTe bajas del metro por la salida de Moncloa, donde como las demas lineas estan cerradas, no te queda otra que cogerte o un patinete o una bicicleta de bicimad, donde depende de la opcion que escojas te encontraras en una situacion u otra.\n");
	printf ("\nEscoge tu opcion:\n1-Coger el patin.\n2-Coger la bicicleta.\nIntroduce tu opcion elegida:  ");
	fflush(stdin);
	scanf ("%d", &opsion);

	if (opsion == 1) {
		printf ("\nTe diriges hacia una una interseccion y resulta que no te acuerdas de que direccion coger, te encuentras varias salidas con distintos numeros y solo ves un cartel informativo que deberas seguir para no perderte:\n ");
	//Acertijo 3(A):
		printf ("\nACERTIJO 3 (A):\n El numero de la calle: es el numero de carreras minimas necesarias, para descubrir a los tres caballos mas veloces, sobre un grupo de 25 caballos, donde solo podras hacer correr a un maximo de 5 caballos a la vez.\n");
		printf ("Cual sera el numero de carreras minimas necesarias, introduce tu respuesta:  ");
		scanf ("%d", &acertijo3A);
		if (acertijo3A != 7) {
			acertijo3A = Pregunta3A(respuesta3A);
		} else {
			printf ("\nEnhorabuena! Acabas de encontrar el numero de la calle correcta, pulse cualquier tecla para continuar\n");
			scanf("\n");
		}
	}

	if (opsion == 2) {
		printf ("\nResulta que el patinete no funciona, y ves cuatro botones donde solo tendras que pulsar uno:\n");
	//Acertijo 3(B):
		printf ("\nACERTIJO 3(B):\nLos botones tienen formas de animales, el que tendras que pulsar tiene la forma del animal escondido en esta adivinanza: as no soy, as no fui, as no sere hasta el fin. Que es lo que soy?\n");
		printf ("Introduce el nombre del animal que creas:\n  ");
		scanf ("%s", animal0);

		for (int l = 0; l < 1; l++) {
			if (strcmp(animal[l].animal, animal0) == 0) {
				r++;
			}
		}
		if (r == 1) {
			printf ("\nEnhorabuena! Enciendes el patin y sigues tu camino, pulsa cualquier tecla para continuar");
			scanf("\n");
		}

		while (r != 1) {
		r = 0;
		printf ("\nMal! Sigue intentandolo, cual crees que puede ser:  ");
		printf ("\nIntrodice el dia, denuevo:  ");
		scanf ("%s", animal);
		} for (int z = 0; z < 1; z++) {
			if (strcmp(animal[z].animal, animal0) == 0) {
				r++;
			}
		break;
		}
		if (r == 1) {
		printf ("\nEnhorabuena! Enciendes el patin y sigues tu camino, pulsa cualquier tecla para continuar\n");
		scanf("\n");
		}
	}


	printf ("Una vez llegas a tu destino te das cuenta que no sabes ni por donde tienes que entrar, ni que tienes que hacer, donde tocandote el bolsillo encuentras una nota donde pone en forma de acertijo, el lugar a donde tienes que entrar.\n");

	//Acertijo 4:
	printf ("\nACERTIJO 4:\nSi piloto quieres ser bien me tienes que cuidar, y con alegria tratar: A que lugar crees que deberias entrar?\n");
	printf ("A- Palacio Vista-alegre.\nB- Bar Torrique.\nC- Campus alegria.\nD- Optica pasion.\nIntroduce la opcion que consideres correcta:  ");
	fflush(stdin);
	scanf ("%c", &acertijo4);
	if (acertijo4 == 'A' || acertijo4 == 'a'){
		printf ("\nEnhorabuena! Acabas de encontrar el lugar a donde tienes que entrar.");
	}
	else {
		acertijo4 = Pregunta4(respuesta4);
	}



	//Ultimo acertijo:
	struct Cumpleanos2 final={23,4,2001};
	int dd, mm, aa;
	printf("Tu destino final es el Palacio Vistalegre, pero para entrar te piden la fecha de tu cumpleaÒos. Muy facil el ultimo acertijo no?, pues deberas recordar que has perdido la memoria y no te acuerdas, deberas introducir la fecha en formato dd/mm/aaaa, pulsa culaquier tecla para continuar\n");
	scanf("\n");
	fflush(stdin);
	printf("\n Primero debes de adivinar un numero de 4 cifras, para lo cual se te daran 6 pistas. \n Las 2 primeras cifras del numero que obtendras corresponden al dia, la tercera al mes, y si sumas 2000 a la cuarta cifra dividida entre 5 obtienes el agno\n");
	printf("\n ATENCION SE RECOMIENDA EL USO DE PAPEL Y LAPIZ\n");
	printf ("\n 1- Es un multiplo de 5 \n");
	printf ("\n 2- La suma digital es 14\n");
	printf("\n 3- 1680 no posee digitos en comun con nuestro numero\n");
	printf("\n 4- 3596 tiene dos digitos con comun con nuestro numero\n");
	printf("\n 5- Los dos primeros digitos son primos y si los sumas forman otro primo \n");
	printf("\n 6- El tercer digito es un divisor de 8\n");
	printf("\n Introduce el dia\n");
	scanf("%d",&dd);
	printf("\n Introduce el numero del mes\n");
	scanf("%d",&mm);
	printf("\n Introduce el agno\n");
	scanf("%d",&aa);
	if(dd==final.dia1 && mm==final.mes1 && aa==final.agno1)
    {
        printf("\n Bravo! Conseguiste pasar todos los acertijos, eres un autentico genio. Ahora sabras toda la verdad\n");
        printf("Resulta que... Era una fiesta sorpresa, la fecha de cumpleagnos era hoy y tus amigos te habian preparado una sorpresa\n");
    }
    else
    {
        printf("Has perdido, quizas deberias haber escogido la otra linea de metro! El numero buscado era 2345. Siendo el cumpleaÒos el 23/4/2001");
    }

            break;
        default:
            printf("Opcion incorrecta\n");
            break;



    case '2':
        printf("Tu te lo pierdes\n");
        break;
}    }





